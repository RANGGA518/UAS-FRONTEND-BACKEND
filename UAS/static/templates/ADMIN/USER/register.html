<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Daftar Akun</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="bg-light">
<nav class="navbar navbar-expand-lg bg-white shadow-sm sticky-top">
    <div class="container">

        <!-- BRAND -->
        <a class="navbar-brand fw-bold text-primary me-3" href="/">
            Minimarket
        </a>

        <!-- TOGGLER (MOBILE) -->
        <button class="navbar-toggler" type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarMain"
                aria-controls="navbarMain"
                aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- COLLAPSE AREA -->
        <div class="collapse navbar-collapse" id="navbarMain">

            <!-- SEARCH -->
            <div class="mx-lg-auto my-3 my-lg-0 w-100 d-flex justify-content-center position-relative">

                {% if pesan %}
                <div id="searchNotif" class="search-floating-alert">
                    <div class="alert alert-warning text-center shadow-sm mb-0">
                        {{ pesan }}
                    </div>
                </div>
                {% endif %}

                <form
                    action="{{ request.path }}"
                    method="get"
                    class="d-flex align-items-center search-wrapper w-100"
                    style="max-width:600px;"
                    onsubmit="return handleSearch(this)">

                    <input type="search"
                           name="q"
                           class="form-control search-input"
                           placeholder="Cari produk..."
                           value="{{ keyword or '' }}">

                    <button type="submit" class="btn btn-primary search-btn ms-2">
                        <i class="bi bi-search"></i>
                    </button>
                </form>
            </div>

            <!-- RIGHT MENU -->
            <div class="d-flex align-items-center gap-3 ms-lg-4">

                <!-- CART -->
                <a href="/cart" class="position-relative text-decoration-none text-dark">
                    <i class="bi bi-cart3 fs-4"></i>
                    {% if cart_count > 0 %}
                    <span class="cart-badge">{{ cart_count }}</span>
                    {% endif %}
                </a>

                {% if session.get("user") %}
                <a href="/profile" class="user-profile d-flex align-items-center text-decoration-none text-dark">
                    <img src="{{ url_for('static', filename='img/user/images.png') }}" width="32" height="32" class="rounded-circle me-2">
                    <span class="fw-semibold">
                        Hi,&nbsp;{{ session.user }}
                    </span>
                </a>
                {% else %}
                <a href="/login" class="btn btn-outline-primary btn-sm">Masuk</a>
                <a href="/register" class="btn btn-primary btn-sm">Daftar</a>
                {% endif %}

            </div>

        </div>
    </div>
</nav>

<div class="container mt-5" style="max-width: 450px;">
    <div class="card shadow-sm">
        <div class="card-body">

            <h4 class="text-center mb-4">Daftar Akun</h4>

            {% if error %}
                <div class="alert alert-danger text-center">
                    {{ error }}
                </div>
            {% endif %}

            <form method="POST" autocomplete="off">

    <div class="mb-3">
        <label>Username</label>
        <input type="text"
               name="username"
               class="form-control"
               required
               autocomplete="off">
    </div>

    <div class="mb-3">
        <label>Email</label>
        <input type="email"
               name="email"
               class="form-control"
               required
               value="{{ old_email if error }}"
               autocomplete="off">
    </div>

    <div class="mb-3">
        <label>Password</label>
        <input type="password"
               name="password"
               class="form-control"
               required
               autocomplete="new-password">
    </div>

    {% if error %}
    <div class="alert alert-danger">
        {{ error }}
    </div>
    {% endif %}

    <button class="btn btn-primary w-100">Daftar</button>
</form>



            <p class="text-center mt-3 mb-0">
                Sudah punya akun?
                <a href="/login">Login</a>
            </p>

        </div>
    </div>
</div>

<footer class="footer mt-5">
    <div class="container py-5">
        <div class="row g-4">

            <!-- BRAND -->
            <div class="col-lg-4 col-md-6">
                <h5 class="footer-brand">Minimarket</h5>
                <p class="footer-text">
                    Minimarket online untuk kebutuhan harian Anda.
                    Mudah, cepat, dan terpercaya.
                </p>

                <div class="footer-social">
                    <a href="#"><i class="bi bi-facebook"></i></a>
                    <a href="#"><i class="bi bi-instagram"></i></a>
                    <a href="#"><i class="bi bi-twitter-x"></i></a>
                </div>
            </div>

            <!-- MENU -->
            <div class="col-lg-2 col-md-6">
                <h6 class="footer-title">Menu</h6>
                <ul class="footer-links">
                    <li><a href="/">Beranda</a></li>
                    <li><a href="/cart">Keranjang</a></li>
                    <li><a href="/login">Masuk</a></li>
                    <li><a href="/register">Daftar</a></li>
                </ul>
            </div>

            <!-- KATEGORI -->
            <div class="col-lg-3 col-md-6">
                <h6 class="footer-title">Kategori Populer</h6>
                <ul class="footer-links">
                    <li><a href="#">Makanan</a></li>
                    <li><a href="#">Minuman</a></li>
                    <li><a href="#">Kebutuhan Rumah</a></li>
                    <li><a href="#">Produk Promo</a></li>
                </ul>
            </div>

            <!-- KONTAK -->
            <div class="col-lg-3 col-md-6">
                <h6 class="footer-title">Kontak Kami</h6>
                <ul class="footer-contact">
                    <li><i class="bi bi-geo-alt"></i> Indonesia</li>
                    <li><i class="bi bi-envelope"></i> support@minimarket.com</li>
                    <li><i class="bi bi-whatsapp"></i> 0812-3456-7890</li>
                </ul>
            </div>

        </div>
    </div>

    <!-- COPYRIGHT -->
    <div class="footer-bottom">
        <div class="container text-center">
            <small>© 2026 Minimarket. All rights reserved.</small>
        </div>
    </div>
</footer>

<script>
    function handleSearch(form) {
    const input = form.querySelector('input[name="q"]');

    // kalau kosong → stay di halaman sekarang
    if (!input.value.trim()) {
        return false;
    }

    return true;
}
    const notif = document.getElementById("searchNotif");

    if (notif) {
        setTimeout(() => {
            notif.style.opacity = "0";
            notif.style.transform = "translateY(-10px)";

            setTimeout(() => {
                notif.remove();
            }, 300);

        }, 3000);
    }
</script>
</body>
</html>
